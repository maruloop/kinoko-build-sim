var r,i=new Array(128).fill(void 0);i.push(void 0,null,!0,!1);var v=i.length;function E(A){v===i.length&&i.push(i.length+1);let j=v;return v=i[j],i[j]=A,j}function l(A){return i[A]}function x(A){A<132||(i[A]=v,v=A)}function n(A){let j=l(A);return x(A),j}var c=0,o=null;function F(){return(o===null||o.byteLength===0)&&(o=new Uint8Array(r.memory.buffer)),o}var I=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},y=typeof I.encodeInto=="function"?function(A,j){return I.encodeInto(A,j)}:function(A,j){let t=I.encode(A);return j.set(t),{read:A.length,written:t.length}};function h(A,j,t){if(t===void 0){let a=I.encode(A),s=j(a.length,1)>>>0;return F().subarray(s,s+a.length).set(a),c=a.length,s}let e=A.length,k=j(e,1)>>>0,d=F(),q=0;for(;q<e;q++){let a=A.charCodeAt(q);if(a>127)break;d[k+q]=a}if(q!==e){q!==0&&(A=A.slice(q)),k=t(k,e,e=q+A.length*3,1)>>>0;let a=F().subarray(k+q,k+e),s=y(A,a);q+=s.written,k=t(k,e,q,1)>>>0}return c=q,k}function K(A){return A==null}var B=null;function C(){return(B===null||B.byteLength===0)&&(B=new Int32Array(r.memory.buffer)),B}var g=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&g.decode();function G(A,j){return A=A>>>0,g.decode(F().subarray(A,A+j))}function w(A,j){if(!(A instanceof j))throw new Error(`expected instance of ${j.name}`);return A.ptr}function N(A,j){try{return A.apply(this,j)}catch(t){r.__wbindgen_exn_store(E(t))}}var $=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>r.__wbg_bbox_free(A>>>0)),O=class m{static __wrap(j){j=j>>>0;let t=Object.create(m.prototype);return t.__wbg_ptr=j,$.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,$.unregister(this),j}free(){let j=this.__destroy_into_raw();r.__wbg_bbox_free(j)}get x(){return r.__wbg_get_bbox_x(this.__wbg_ptr)}set x(j){r.__wbg_set_bbox_x(this.__wbg_ptr,j)}get y(){return r.__wbg_get_bbox_y(this.__wbg_ptr)}set y(j){r.__wbg_set_bbox_y(this.__wbg_ptr,j)}get width(){return r.__wbg_get_bbox_width(this.__wbg_ptr)}set width(j){r.__wbg_set_bbox_width(this.__wbg_ptr,j)}get height(){return r.__wbg_get_bbox_height(this.__wbg_ptr)}set height(j){r.__wbg_set_bbox_height(this.__wbg_ptr,j)}},u=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>r.__wbg_renderedimage_free(A>>>0)),_=class D{static __wrap(j){j=j>>>0;let t=Object.create(D.prototype);return t.__wbg_ptr=j,u.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let j=this.__wbg_ptr;return this.__wbg_ptr=0,u.unregister(this),j}free(){let j=this.__destroy_into_raw();r.__wbg_renderedimage_free(j)}get width(){return r.renderedimage_width(this.__wbg_ptr)>>>0}get height(){return r.renderedimage_height(this.__wbg_ptr)>>>0}asPng(){try{let k=r.__wbindgen_add_to_stack_pointer(-16);r.renderedimage_asPng(k,this.__wbg_ptr);var j=C()[k/4+0],t=C()[k/4+1],e=C()[k/4+2];if(e)throw n(t);return n(j)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get pixels(){let j=r.renderedimage_pixels(this.__wbg_ptr);return n(j)}},P=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(A=>r.__wbg_resvg_free(A>>>0)),L=class{__destroy_into_raw(){let A=this.__wbg_ptr;return this.__wbg_ptr=0,P.unregister(this),A}free(){let A=this.__destroy_into_raw();r.__wbg_resvg_free(A)}constructor(A,j,t){try{let s=r.__wbindgen_add_to_stack_pointer(-16);var e=K(j)?0:h(j,r.__wbindgen_malloc,r.__wbindgen_realloc),k=c;r.resvg_new(s,E(A),e,k,K(t)?0:E(t));var d=C()[s/4+0],q=C()[s/4+1],a=C()[s/4+2];if(a)throw n(q);return this.__wbg_ptr=d>>>0,this}finally{r.__wbindgen_add_to_stack_pointer(16)}}get width(){return r.resvg_width(this.__wbg_ptr)}get height(){return r.resvg_height(this.__wbg_ptr)}render(){try{let e=r.__wbindgen_add_to_stack_pointer(-16);r.resvg_render(e,this.__wbg_ptr);var A=C()[e/4+0],j=C()[e/4+1],t=C()[e/4+2];if(t)throw n(j);return _.__wrap(A)}finally{r.__wbindgen_add_to_stack_pointer(16)}}toString(){let A,j;try{let k=r.__wbindgen_add_to_stack_pointer(-16);r.resvg_toString(k,this.__wbg_ptr);var t=C()[k/4+0],e=C()[k/4+1];return A=t,j=e,G(t,e)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(A,j,1)}}innerBBox(){let A=r.resvg_innerBBox(this.__wbg_ptr);return A===0?void 0:O.__wrap(A)}getBBox(){let A=r.resvg_getBBox(this.__wbg_ptr);return A===0?void 0:O.__wrap(A)}cropByBBox(A){w(A,O),r.resvg_cropByBBox(this.__wbg_ptr,A.__wbg_ptr)}imagesToResolve(){try{let e=r.__wbindgen_add_to_stack_pointer(-16);r.resvg_imagesToResolve(e,this.__wbg_ptr);var A=C()[e/4+0],j=C()[e/4+1],t=C()[e/4+2];if(t)throw n(j);return n(A)}finally{r.__wbindgen_add_to_stack_pointer(16)}}resolveImage(A,j){try{let k=r.__wbindgen_add_to_stack_pointer(-16),d=h(A,r.__wbindgen_malloc,r.__wbindgen_realloc),q=c;r.resvg_resolveImage(k,this.__wbg_ptr,d,q,E(j));var t=C()[k/4+0],e=C()[k/4+1];if(e)throw n(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}};async function T(A,j){if(typeof Response=="function"&&A instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(A,j)}catch(e){if(A.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e);else throw e}let t=await A.arrayBuffer();return await WebAssembly.instantiate(t,j)}else{let t=await WebAssembly.instantiate(A,j);return t instanceof WebAssembly.Instance?{instance:t,module:A}:t}}function U(){let A={};return A.wbg={},A.wbg.__wbg_new_28c511d9baebfa89=function(j,t){let e=new Error(G(j,t));return E(e)},A.wbg.__wbindgen_memory=function(){let j=r.memory;return E(j)},A.wbg.__wbg_buffer_12d079cc21e14bdb=function(j){let t=l(j).buffer;return E(t)},A.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(j,t,e){let k=new Uint8Array(l(j),t>>>0,e>>>0);return E(k)},A.wbg.__wbindgen_object_drop_ref=function(j){n(j)},A.wbg.__wbg_new_63b92bc8671ed464=function(j){let t=new Uint8Array(l(j));return E(t)},A.wbg.__wbg_values_839f3396d5aac002=function(j){let t=l(j).values();return E(t)},A.wbg.__wbg_next_196c84450b364254=function(){return N(function(j){let t=l(j).next();return E(t)},arguments)},A.wbg.__wbg_done_298b57d23c0fc80c=function(j){return l(j).done},A.wbg.__wbg_value_d93c65011f51a456=function(j){let t=l(j).value;return E(t)},A.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(j){let t;try{t=l(j)instanceof Uint8Array}catch{t=!1}return t},A.wbg.__wbindgen_string_get=function(j,t){let e=l(t),k=typeof e=="string"?e:void 0;var d=K(k)?0:h(k,r.__wbindgen_malloc,r.__wbindgen_realloc),q=c;C()[j/4+1]=q,C()[j/4+0]=d},A.wbg.__wbg_new_16b304a2cfa7ff4a=function(){let j=new Array;return E(j)},A.wbg.__wbindgen_string_new=function(j,t){let e=G(j,t);return E(e)},A.wbg.__wbg_push_a5b05aedc7234f9f=function(j,t){return l(j).push(l(t))},A.wbg.__wbg_length_c20a40f15020d68a=function(j){return l(j).length},A.wbg.__wbg_set_a47bac70306a19a7=function(j,t,e){l(j).set(l(t),e>>>0)},A.wbg.__wbindgen_throw=function(j,t){throw new Error(G(j,t))},A}function Q(A,j){return r=A.exports,b.__wbindgen_wasm_module=j,B=null,o=null,r}async function b(A){if(r!==void 0)return r;typeof A>"u"&&(A=new URL("index_bg.wasm",void 0));let j=U();(typeof A=="string"||typeof Request=="function"&&A instanceof Request||typeof URL=="function"&&A instanceof URL)&&(A=fetch(A));let{instance:t,module:e}=await T(await A,j);return Q(t,e)}var J=b,f=!1,M=async A=>{if(f)throw new Error("Already initialized. The `initWasm()` function can be used only once.");await J(await A),f=!0},H=class extends L{constructor(A,j){if(!f)throw new Error("Wasm has not been initialized. Call `initWasm()` function.");let t=j?.font;if(t&&R(t)){let e={...j,font:{...t,fontBuffers:void 0}};super(A,JSON.stringify(e),t.fontBuffers)}else super(A,JSON.stringify(j))}};function R(A){return Object.prototype.hasOwnProperty.call(A,"fontBuffers")}var p="./index_bg-FJSFOL2O.wasm";var rA=async A=>{let{request:j}=A,t=new URL(j.url),e=X(t.searchParams.get("title")||"\u30AD\u30CE\u30B3\u4F1D\u8AAC\u30D3\u30EB\u30C9\u30B7\u30DF\u30E5\u30EC\u30FC\u30BF\u30FC");console.log(p);let k=await M(await(await fetch(p)).arrayBuffer()),a=new H(V(e)).render().asPng();return new Response(a,{headers:{"Content-Type":"image/png","Cache-Control":"public, max-age=86400"}})};function V(A){return`
    <svg width="1200" height="630" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#f9f9f9"/>
      <text x="50%" y="50%" font-family="Arial" font-size="64" fill="#333" text-anchor="middle">${z(A)}</text>
    </svg>`}function X(A){return A.length>25?A.slice(0,25)+"\u2026":A}function z(A){return A.replace(/[&<>"']/g,j=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"})[j]||j)}export{rA as onRequestGet};
//# sourceMappingURL=ogp.js.map
