var r,b=new Array(128).fill(void 0);b.push(void 0,null,!0,!1);var h=b.length;function c(e){h===b.length&&b.push(b.length+1);let t=h;return h=b[t],b[t]=e,t}function a(e){return b[e]}function I(e){e<132||(b[e]=h,h=e)}function f(e){let t=a(e);return I(e),t}var p=0,u=null;function y(){return(u===null||u.byteLength===0)&&(u=new Uint8Array(r.memory.buffer)),u}var v=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},S=typeof v.encodeInto=="function"?function(e,t){return v.encodeInto(e,t)}:function(e,t){let n=v.encode(e);return t.set(n),{read:e.length,written:n.length}};function R(e,t,n){if(n===void 0){let g=v.encode(e),w=t(g.length,1)>>>0;return y().subarray(w,w+g.length).set(g),p=g.length,w}let _=e.length,i=t(_,1)>>>0,d=y(),o=0;for(;o<_;o++){let g=e.charCodeAt(o);if(g>127)break;d[i+o]=g}if(o!==_){o!==0&&(e=e.slice(o)),i=n(i,_,_=o+e.length*3,1)>>>0;let g=y().subarray(i+o,i+_),w=S(e,g);o+=w.written,i=n(i,_,o,1)>>>0}return p=o,i}function B(e){return e==null}var l=null;function s(){return(l===null||l.byteLength===0)&&(l=new Int32Array(r.memory.buffer)),l}var W=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&W.decode();function m(e,t){return e=e>>>0,W.decode(y().subarray(e,e+t))}function j(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`);return e.ptr}function M(e,t){try{return e.apply(this,t)}catch(n){r.__wbindgen_exn_store(c(n))}}var O=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_bbox_free(e>>>0)),x=class k{static __wrap(t){t=t>>>0;let n=Object.create(k.prototype);return n.__wbg_ptr=t,O.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){let t=this.__wbg_ptr;return this.__wbg_ptr=0,O.unregister(this),t}free(){let t=this.__destroy_into_raw();r.__wbg_bbox_free(t)}get x(){return r.__wbg_get_bbox_x(this.__wbg_ptr)}set x(t){r.__wbg_set_bbox_x(this.__wbg_ptr,t)}get y(){return r.__wbg_get_bbox_y(this.__wbg_ptr)}set y(t){r.__wbg_set_bbox_y(this.__wbg_ptr,t)}get width(){return r.__wbg_get_bbox_width(this.__wbg_ptr)}set width(t){r.__wbg_set_bbox_width(this.__wbg_ptr,t)}get height(){return r.__wbg_get_bbox_height(this.__wbg_ptr)}set height(t){r.__wbg_set_bbox_height(this.__wbg_ptr,t)}},T=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_renderedimage_free(e>>>0)),C=class z{static __wrap(t){t=t>>>0;let n=Object.create(z.prototype);return n.__wbg_ptr=t,T.register(n,n.__wbg_ptr,n),n}__destroy_into_raw(){let t=this.__wbg_ptr;return this.__wbg_ptr=0,T.unregister(this),t}free(){let t=this.__destroy_into_raw();r.__wbg_renderedimage_free(t)}get width(){return r.renderedimage_width(this.__wbg_ptr)>>>0}get height(){return r.renderedimage_height(this.__wbg_ptr)>>>0}asPng(){try{let i=r.__wbindgen_add_to_stack_pointer(-16);r.renderedimage_asPng(i,this.__wbg_ptr);var t=s()[i/4+0],n=s()[i/4+1],_=s()[i/4+2];if(_)throw f(n);return f(t)}finally{r.__wbindgen_add_to_stack_pointer(16)}}get pixels(){let t=r.renderedimage_pixels(this.__wbg_ptr);return f(t)}},L=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_resvg_free(e>>>0)),D=class{__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,L.unregister(this),e}free(){let e=this.__destroy_into_raw();r.__wbg_resvg_free(e)}constructor(e,t,n){try{let w=r.__wbindgen_add_to_stack_pointer(-16);var _=B(t)?0:R(t,r.__wbindgen_malloc,r.__wbindgen_realloc),i=p;r.resvg_new(w,c(e),_,i,B(n)?0:c(n));var d=s()[w/4+0],o=s()[w/4+1],g=s()[w/4+2];if(g)throw f(o);return this.__wbg_ptr=d>>>0,this}finally{r.__wbindgen_add_to_stack_pointer(16)}}get width(){return r.resvg_width(this.__wbg_ptr)}get height(){return r.resvg_height(this.__wbg_ptr)}render(){try{let _=r.__wbindgen_add_to_stack_pointer(-16);r.resvg_render(_,this.__wbg_ptr);var e=s()[_/4+0],t=s()[_/4+1],n=s()[_/4+2];if(n)throw f(t);return C.__wrap(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}toString(){let e,t;try{let i=r.__wbindgen_add_to_stack_pointer(-16);r.resvg_toString(i,this.__wbg_ptr);var n=s()[i/4+0],_=s()[i/4+1];return e=n,t=_,m(n,_)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t,1)}}innerBBox(){let e=r.resvg_innerBBox(this.__wbg_ptr);return e===0?void 0:x.__wrap(e)}getBBox(){let e=r.resvg_getBBox(this.__wbg_ptr);return e===0?void 0:x.__wrap(e)}cropByBBox(e){j(e,x),r.resvg_cropByBBox(this.__wbg_ptr,e.__wbg_ptr)}imagesToResolve(){try{let _=r.__wbindgen_add_to_stack_pointer(-16);r.resvg_imagesToResolve(_,this.__wbg_ptr);var e=s()[_/4+0],t=s()[_/4+1],n=s()[_/4+2];if(n)throw f(t);return f(e)}finally{r.__wbindgen_add_to_stack_pointer(16)}}resolveImage(e,t){try{let i=r.__wbindgen_add_to_stack_pointer(-16),d=R(e,r.__wbindgen_malloc,r.__wbindgen_realloc),o=p;r.resvg_resolveImage(i,this.__wbg_ptr,d,o,c(t));var n=s()[i/4+0],_=s()[i/4+1];if(_)throw f(n)}finally{r.__wbindgen_add_to_stack_pointer(16)}}};async function P(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(_){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function q(){let e={};return e.wbg={},e.wbg.__wbg_new_28c511d9baebfa89=function(t,n){let _=new Error(m(t,n));return c(_)},e.wbg.__wbindgen_memory=function(){let t=r.memory;return c(t)},e.wbg.__wbg_buffer_12d079cc21e14bdb=function(t){let n=a(t).buffer;return c(n)},e.wbg.__wbg_newwithbyteoffsetandlength_aa4a17c33a06e5cb=function(t,n,_){let i=new Uint8Array(a(t),n>>>0,_>>>0);return c(i)},e.wbg.__wbindgen_object_drop_ref=function(t){f(t)},e.wbg.__wbg_new_63b92bc8671ed464=function(t){let n=new Uint8Array(a(t));return c(n)},e.wbg.__wbg_values_839f3396d5aac002=function(t){let n=a(t).values();return c(n)},e.wbg.__wbg_next_196c84450b364254=function(){return M(function(t){let n=a(t).next();return c(n)},arguments)},e.wbg.__wbg_done_298b57d23c0fc80c=function(t){return a(t).done},e.wbg.__wbg_value_d93c65011f51a456=function(t){let n=a(t).value;return c(n)},e.wbg.__wbg_instanceof_Uint8Array_2b3bbecd033d19f6=function(t){let n;try{n=a(t)instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbindgen_string_get=function(t,n){let _=a(n),i=typeof _=="string"?_:void 0;var d=B(i)?0:R(i,r.__wbindgen_malloc,r.__wbindgen_realloc),o=p;s()[t/4+1]=o,s()[t/4+0]=d},e.wbg.__wbg_new_16b304a2cfa7ff4a=function(){let t=new Array;return c(t)},e.wbg.__wbindgen_string_new=function(t,n){let _=m(t,n);return c(_)},e.wbg.__wbg_push_a5b05aedc7234f9f=function(t,n){return a(t).push(a(n))},e.wbg.__wbg_length_c20a40f15020d68a=function(t){return a(t).length},e.wbg.__wbg_set_a47bac70306a19a7=function(t,n,_){a(t).set(a(n),_>>>0)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(m(t,n))},e}function N(e,t){return r=e.exports,E.__wbindgen_wasm_module=t,l=null,u=null,r}async function E(e){if(r!==void 0)return r;typeof e>"u"&&(e=new URL("index_bg.wasm",void 0));let t=q();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));let{instance:n,module:_}=await P(await e,t);return N(n,_)}var G=E,A=!1,F=async e=>{if(A)throw new Error("Already initialized. The `initWasm()` function can be used only once.");await G(await e),A=!0},U=class extends D{constructor(e,t){if(!A)throw new Error("Wasm has not been initialized. Call `initWasm()` function.");let n=t?.font;if(n&&J(n)){let _={...t,font:{...n,fontBuffers:void 0}};super(e,JSON.stringify(_),n.fontBuffers)}else super(e,JSON.stringify(t))}};function J(e){return Object.prototype.hasOwnProperty.call(e,"fontBuffers")}async function H(e){let t=new URL("/index_bg.wasm",e.url).toString(),_=await(await fetch(t)).arrayBuffer();await F(_)}var X=async e=>{let{request:t,env:n}=e,_=new URL(t.url);await H(t);let i=`
    <svg width="1200" height="630" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#f9f9f9"/>
      <text x="50%" y="50%" font-size="64" text-anchor="middle" fill="#333">Dynamic OGP</text>
    </svg>
  `,o=new U(i).render().asPng();return new Response(o,{headers:{"Content-Type":"image/png","Cache-Control":"public, max-age=86400"}})};export{X as onRequestGet};
//# sourceMappingURL=ogp.js.map
