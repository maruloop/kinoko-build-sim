"use strict";(()=>{function l(e,t,n){e.removeEventListener(t,n),e.addEventListener(t,n)}var O="title";function me(e){let t=new URLSearchParams(window.location.search);t.set(O,e);let n=t.toString()?"?"+t.toString():window.location.pathname;history.replaceState(null,"",n)}function ue(){let e=document.getElementById("build-title"),n=new URLSearchParams(window.location.search).get(O);n&&(e.value=Y(decodeURIComponent(n)))}function Y(e){return e.replace(/[<>&"'`]/g,"")}function _(){let e=document.getElementById("build-title");ue(),l(e,"input",()=>{let t=Y(e.value);e.value!==t&&(e.value=t);let n=e.value.trim();me(n)})}var M=[{id:1,name:"\u80DE\u5B50\u7206\u5F3E",icon:"icons/skills/1.jpg"},{id:2,name:"\u83CC\u8338\u982D\u6253",icon:"icons/skills/2.jpg"},{id:3,name:"\u80DE\u5B50\u9023\u6483",icon:"icons/skills/3.jpg"},{id:4,name:"\u5DE8\u77F3\u885D\u6483",icon:"icons/skills/4.jpg"},{id:5,name:"\u30C8\u30B2\u8302\u307F",icon:"icons/skills/5.jpg"},{id:6,name:"\u30AD\u30CE\u5148\u99C6",icon:"icons/skills/6.jpg"},{id:7,name:"\u30C4\u30BF\u7E1B\u308A",icon:"icons/skills/7.jpg"},{id:8,name:"\u75BE\u99C6\u83CC\u8338",icon:"icons/skills/8.jpg"},{id:9,name:"\u8718\u86DB\u306E\u5DE3",icon:"icons/skills/9.jpg"},{id:10,name:"\u843D\u30D1\u30A4\u30F3",icon:"icons/skills/10.jpg"},{id:11,name:"\u8C9D\u6069\u8FD4\u3057",icon:"icons/skills/11.jpg"},{id:12,name:"\u30C4\u30BF\u7E41\u8302",icon:"icons/skills/12.jpg"},{id:13,name:"\u8759\u8760\u884C\u65B9",icon:"icons/skills/13.jpg"},{id:14,name:"\u5927\u5730\u56DE\u5FA9",icon:"icons/skills/14.jpg"},{id:15,name:"\u83CC\u30D0\u30EA\u30A2",icon:"icons/skills/15.jpg"},{id:16,name:"\u30C9\u30EA\u7206\u5F3E",icon:"icons/skills/16.jpg"},{id:17,name:"\u53CD\u5247\u6253\u6483",icon:"icons/skills/17.jpg"},{id:18,name:"\u901F\u5EA6\u6696\u6162",icon:"icons/skills/18.jpg"},{id:19,name:"\u30B3\u30A4\u30F3\u7206\u5F3E",icon:"icons/skills/19.jpg"},{id:20,name:"\u30B9\u30E9\u30A4\u5F3E",icon:"icons/skills/20.jpg"},{id:21,name:"\u6D41\u661F\u843D\u5F3E",icon:"icons/skills/21.jpg"},{id:22,name:"\u6B66\u88C5\u89E3\u9664",icon:"icons/skills/22.jpg"},{id:23,name:"\u76EE\u7729\u5931\u795E",icon:"icons/skills/23.jpg"},{id:24,name:"\u7159\u5E55\u5F3E",icon:"icons/skills/24.jpg"},{id:25,name:"\u7121\u5E38\u72E9\u547D",icon:"icons/skills/25.jpg"},{id:26,name:"\u82F1\u9B42\u964D\u81E8",icon:"icons/skills/26.jpg"},{id:27,name:"\u72C2\u98A8\u901A\u9053",icon:"icons/skills/27.jpg"},{id:28,name:"\u7A32\u59BB\u5947\u8972",icon:"icons/skills/28.jpg"},{id:29,name:"\u5229\u5203\u8CAB\u901A",icon:"icons/skills/29.jpg"},{id:30,name:"\u5206\u8EAB\u653B\u6483",icon:"icons/skills/30.jpg"},{id:31,name:"\u767E\u65AC\u5343\u9396",icon:"icons/skills/31.jpg"},{id:32,name:"\u98A8\u795E\u306E\u77E2",icon:"icons/skills/32.jpg"},{id:33,name:"\u8840\u6708\u964D\u81E8",icon:"icons/skills/33.jpg"},{id:34,name:"\u7ADC\u541F\u53CC\u58F0",icon:"icons/skills/34.jpg"},{id:35,name:"\u5929\u4E0B\u306E\u7F60",icon:"icons/skills/35.jpg"},{id:36,name:"\u30BF\u30ED\u30C3\u30C8\u661F\u9663",icon:"icons/skills/36.jpg"},{id:37,name:"\u9CF6\u8776\u5165\u5922",icon:"icons/skills/37.jpg"},{id:38,name:"\u7956\u795E\u306E\u610F\u601D",icon:"icons/skills/38.jpg"}];var w=[{id:1,name:"\u5375\u5272\u308A\u5C0F\u9D8F",species:"\u9D8F",icon:"icons/pals/1.jpg"},{id:2,name:"\u30AD\u30CE\u30B3\u9CE5",species:"\u9CE5",icon:"icons/pals/2.jpg"},{id:3,name:"\u30C7\u30F3\u30C7\u30F3\u866B",species:"\u8778\u725B",icon:"icons/pals/3.jpg"},{id:4,name:"\u6C34\u7389",species:"\u6C34\u7389",icon:"icons/pals/4.jpg"},{id:5,name:"\u98DB\u884C\u72D0",species:"\u5996\u7CBE",icon:"icons/pals/5.jpg"},{id:6,name:"\u30D1\u30F3\u30C0",species:"\u30D1\u30F3\u30C0",icon:"icons/pals/6.jpg"},{id:7,name:"\u5B50\u9E7F",species:"\u9E7F",icon:"icons/pals/7.jpg"},{id:8,name:"\u5B50\u732B",species:"\u732B",icon:"icons/pals/8.jpg"},{id:9,name:"\u96EA\u5E03\u98A0",species:"\u96EA\u7CBE\u970A",icon:"icons/pals/9.jpg"},{id:10,name:"\u8C46\u67F4",species:"\u829D\u72AC",icon:"icons/pals/10.jpg"},{id:11,name:"\u8056\u591C\u706B\u9D8F",species:"\u9D8F",icon:"icons/pals/11.jpg"},{id:12,name:"\u30A2\u30DE\u30E4\u9CE5",species:"\u9CE5",icon:"icons/pals/12.jpg"},{id:13,name:"\u68D8\u30C7\u30F3\u30C7\u30F3\u866B",species:"\u8778\u725B",icon:"icons/pals/13.jpg"},{id:14,name:"\u53CD\u9006\u30D0\u30CA\u30CA",species:"\u30D0\u30CA\u30CA",icon:"icons/pals/14.jpg"},{id:15,name:"\u9ED2\u732B",species:"\u732B",icon:"icons/pals/15.jpg"},{id:16,name:"\u81EA\u7136\u306E\u7CBE\u970A",species:"\u6C34\u7389",icon:"icons/pals/16.jpg"},{id:17,name:"\u30A2\u30DF\u3061\u3083\u3093",species:"\u5996\u7CBE",icon:"icons/pals/17.jpg"},{id:18,name:"\u96EA\u56E3\u5B50",species:"\u96EA\u7CBE\u970A",icon:"icons/pals/18.jpg"},{id:19,name:"\u67F4\u592A\u90CE",species:"\u829D\u72AC",icon:"icons/pals/19.jpg"},{id:20,name:"\u30D1\u30F3\u30C0\u69CC",species:"\u30D1\u30F3\u30C0",icon:"icons/pals/20.jpg"},{id:21,name:"\u679D\u89D2\u9E7F",species:"\u9E7F",icon:"icons/pals/21.jpg"},{id:22,name:"\u6F54\u7656\u95D8\u58EB",species:"\u6B6F\u78E8\u304D\u7C89",icon:"icons/pals/22.jpg"},{id:23,name:"\u9B54\u5973\u732B",species:"\u732B",icon:"icons/pals/23.jpg"},{id:24,name:"\u597D\u6226\u306A\u6C34\u7389",species:"\u6C34\u7389",icon:"icons/pals/24.jpg"},{id:25,name:"\u30DC\u30FC\u30B4\u30F3",species:"\u5996\u7CBE",icon:"icons/pals/25.jpg"},{id:26,name:"\u96EA\u7CBE\u970A",species:"\u96EA\u7CBE\u970A",icon:"icons/pals/26.jpg"},{id:27,name:"\u30D1\u30D5\u30A7\u67F4",species:"\u829D\u72AC",icon:"icons/pals/27.jpg"},{id:28,name:"\u6226\u95D8\u9D8F",species:"\u9D8F",icon:"icons/pals/28.jpg"},{id:29,name:"\u9752\u30EC\u30A4\u9CE5",species:"\u9CE5",icon:"icons/pals/29.jpg"},{id:30,name:"\u5B66\u5F92\u30D1\u30F3\u30C0",species:"\u30D1\u30F3\u30C0",icon:"icons/pals/30.jpg"},{id:31,name:"\u82D4\u30C7\u30F3\u30C7\u30F3\u866B",species:"\u8778\u725B",icon:"icons/pals/31.jpg"},{id:32,name:"\u751F\u82B1\u9E7F",species:"\u9E7F",icon:"icons/pals/32.jpg"},{id:33,name:"\u30DE\u30A4\u732B",species:"\u732B",icon:"icons/pals/33.jpg"},{id:34,name:"\u5E38\u52DD\u6C34\u7389",species:"\u6C34\u7389",icon:"icons/pals/34.jpg"},{id:35,name:"\u8CAB\u901A\u7363",species:"\u5996\u7CBE",icon:"icons/pals/35.jpg"},{id:36,name:"\u96EA\u5996\u602A",species:"\u96EA\u7CBE\u970A",icon:"icons/pals/36.jpg"},{id:37,name:"\u30E1\u30AB\u67F4",species:"\u829D\u72AC",icon:"icons/pals/37.jpg"},{id:38,name:"\u529F\u592B\u795E\u9D8F",species:"\u9D8F",icon:"icons/pals/38.jpg"},{id:39,name:"\u7D05\u30E9\u30F3\u9CE5",species:"\u9CE5",icon:"icons/pals/39.jpg"},{id:40,name:"\u9053\u7740\u30D1\u30F3\u30C0",species:"\u30D1\u30F3\u30C0",icon:"icons/pals/40.jpg"},{id:41,name:"\u30A2\u30A4\u30B9\u30C7\u30F3\u866B",species:"\u8778\u725B",icon:"icons/pals/41.jpg"},{id:42,name:"\u970A\u9E7F",species:"\u9E7F",icon:"icons/pals/42.jpg"},{id:43,name:"\u694A\u679D\u30CA\u30B9",species:"\u30CA\u30B9",icon:"icons/pals/43.jpg"},{id:44,name:"\u526F\u9F8D\u30DD\u30E8\u30F3",species:"\u7ADC",icon:"icons/pals/44.jpg"},{id:45,name:"\u30ED\u30DC\u30C9\u30E9\u30B4\u30F3",species:"\u30ED\u30DC\u30C9\u30E9\u30B4\u30F3",icon:"icons/pals/45.jpg"},{id:46,name:"B.Duck",species:"B.Duck",icon:"icons/pals/46.jpg"},{id:47,name:"\u30CE\u30D6\u30CA\u30AC\u30EF\u30F3",species:"\u30CE\u30D6\u30CA\u30AC\u30EF\u30F3",icon:"icons/pals/47.jpg"},{id:48,name:"\u30C6\u30EA\u30A2\u30E2\u30F3",species:"\u30C6\u30EA\u30A2\u30E2\u30F3",icon:"icons/pals/48.jpg"},{id:49,name:"\u30EC\u30CA\u30E2\u30F3",species:"\u30EC\u30CA\u30E2\u30F3",icon:"icons/pals/49.jpg"},{id:50,name:"\u30B7\u30E5\u30FC\u5B50\u3061\u3083\u3093",species:"\u30B7\u30E5\u30FC\u5B50\u3061\u3083\u3093",icon:"icons/pals/50.jpg"},{id:51,name:"\u30B2\u30ED\u30BF\u30F3",species:"\u30B2\u30ED\u30BF\u30F3",icon:"icons/pals/51.jpg"},{id:52,name:"\u30C0\u30F3\u30B4\u30ED\u30F3",species:"\u30C0\u30F3\u30B4\u30ED\u30F3",icon:"icons/pals/52.jpg"},{id:53,name:"\u738B\u5B50\u732B",species:"\u732B",icon:"icons/pals/53.jpg"},{id:54,name:"\u6226\u795E\u6C34\u7389",species:"\u6C34\u7389",icon:"icons/pals/54.jpg"},{id:55,name:"\u706B\u5C3E",species:"\u5996\u7CBE",icon:"icons/pals/55.jpg"},{id:56,name:"\u96EA\u5927\u5C06",species:"\u96EA\u7CBE\u970A",icon:"icons/pals/56.jpg"},{id:57,name:"\u6B66\u58EB\u67F4",species:"\u829D\u72AC",icon:"icons/pals/57.jpg"},{id:58,name:"\u5929\u4E0B\u30C8\u30EA",species:"\u9D8F",icon:"icons/pals/58.jpg"},{id:59,name:"\u4FA0\u30AB\u30AF\u9CE5",species:"\u9CE5",icon:"icons/pals/59.jpg"},{id:60,name:"\u6B66\u82B8\u30D1\u30F3\u30C0",species:"\u30D1\u30F3\u30C0",icon:"icons/pals/60.jpg"},{id:61,name:"\u9154\u30C7\u30F3\u30C7\u30F3\u866B",species:"\u8778\u725B",icon:"icons/pals/61.jpg"},{id:62,name:"\u5929\u4F7F\u9E7F",species:"\u9E7F",icon:"icons/pals/62.jpg"},{id:63,name:"\u6B63\u7FA9\u30D0\u30CA\u30CA",species:"\u30D0\u30CA\u30CA",icon:"icons/pals/63.jpg"},{id:64,name:"\u8679\u5B88\u8B77\u8005",species:"\u6B6F\u78E8\u304D\u7C89",icon:"icons/pals/64.jpg"},{id:65,name:"\u50B7\u5FC3\u86D9",species:"\u50B7\u5FC3\u86D9",icon:"icons/pals/65.jpg"},{id:66,name:"\u51A5\u706B\u5E7D\u7FBD",species:"\u51A5\u706B\u5E7D\u7FBD",icon:"icons/pals/66.jpg"},{id:67,name:"\u30D0\u30BF\u30D0\u30BF\u5B50\u72AC",species:"\u30D0\u30BF\u30D0\u30BF\u5B50\u72AC",icon:"icons/pals/67.jpg"},{id:68,name:"\u6D77\u8CCA\u30AA\u30A6\u30E0",species:"\u6D77\u8CCA\u30AA\u30A6\u30E0",icon:"icons/pals/68.jpg"},{id:69,name:"\u30B8\u30F3\u30B8\u30E3\u30FC\u30AF\u30C3\u30AD\u30FC",species:"\u30B8\u30F3\u30B8\u30E3\u30FC\u30AF\u30C3\u30AD\u30FC",icon:"icons/pals/69.jpg"},{id:70,name:"\u96A0\u5B9D\u7ADC",species:"\u7ADC",icon:"icons/pals/70.jpg"},{id:71,name:"\u30AF\u30FC\u30EB\u30AB\u30E1",species:"\u30AB\u30E1",icon:"icons/pals/71.jpg"},{id:72,name:"\u30ED\u30DC\u30C9\u30C3\u30B0",species:"\u30ED\u30DC\u30C9\u30C3\u30B0",icon:"icons/pals/72.jpg"},{id:73,name:"\u72D0\u5C71\u795E\u72D0",species:"\u72D0",icon:"icons/pals/73.jpg"},{id:74,name:"\u6D77\u8CCA\u30BF\u30B3",species:"\u30BF\u30B3",icon:"icons/pals/74.jpg"},{id:75,name:"\u5BCC\u8C6A\u30C8\u30AB\u30B2",species:"\u30C8\u30AB\u30B2",icon:"icons/pals/75.jpg"},{id:76,name:"\u6708\u306E\u514E",species:"\u6708\u306E\u514E",icon:"icons/pals/76.jpg"},{id:77,name:"\u99DD\u9234\u30AB\u30E9\u30F3",species:"\u30A2\u30EB\u30D1\u30AB",icon:"icons/pals/77.jpg"}];var S=null,m=document.createElement("div");m.innerHTML=`
  <div class="modal-content">
    <p>\u672C\u5F53\u306B\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3059\u304B\uFF1F</p>
    <button id="confirm-yes">\u306F\u3044</button>
    <button id="confirm-no">\u30AD\u30E3\u30F3\u30BB\u30EB</button>
  </div>
`;m.classList.add("modal");document.body.appendChild(m);var ge=m.querySelector("#confirm-yes"),Se=m.querySelector("#confirm-no");function r(e,t){S=e,m.querySelector("p").textContent=`${t}\u3092\u30EA\u30BB\u30C3\u30C8\u3057\u307E\u3059\u304B\uFF1F`,m.style.display="block"}function J(){m.style.display="none",S=null}function fe(){if(S){let e=new URLSearchParams(window.location.search);e.delete(S);let t=e.toString()?"?"+e.toString():window.location.pathname;history.replaceState(null,"",t)}}ge.addEventListener("click",()=>{fe(),f(),J()});Se.addEventListener("click",J);var E="pals";function h(){let e=document.getElementById("pals-list");e.innerHTML="",w.forEach(t=>{let n=document.createElement("img");n.src=t.icon,n.alt=t.name,n.classList.add("pal-icon"),n.dataset.id=String(t.id),l(n,"click",()=>Ee(t)),e.appendChild(n)}),he()}function Ee(e){let t=document.querySelector(`.pal-slot[data-pal-id="${e.id}"]`);if(t){let n=parseInt(t.dataset.slot||"1",10);R(n)}else{let n=document.querySelector(".pal-slot:not([data-pal-id])");if(n){n.dataset.palId=String(e.id),n.innerHTML="";let i=document.createElement("img");i.src=e.icon,i.alt=e.name,i.classList.add("pal-icon","selected"),i.dataset.palId=String(e.id),l(i,"click",()=>{let s=parseInt(n.dataset.slot||"1",10);R(s)}),n.appendChild(i),y(),h()}}}function R(e){let t=document.querySelector(`.pal-slot[data-slot="${e}"]`);t&&(t.removeAttribute("data-pal-id"),t.innerHTML='<span class="pal-icon empty"></span>'),h(),y()}function he(){document.querySelectorAll(".pal-icon").forEach(e=>{let t=e.dataset.id;document.querySelector(`.pal-slot[data-pal-id="${t}"]`)?e.classList.add("selected"):e.classList.remove("selected")})}function y(){let e=new URLSearchParams(window.location.search),t=Array.from(document.querySelectorAll(".pal-slot[data-pal-id]")).map(i=>{let s=i.getAttribute("data-slot"),a=i.getAttribute("data-pal-id");return`${s}:${a}`}).join(",");t?e.set(E,t):e.delete(E);let n=e.toString()?"?"+e.toString():window.location.pathname;history.replaceState(null,"",n)}function ye(){let e=document.getElementById("selected-pals");e.innerHTML="";let t=v();for(let n=0;n<t;n++){let i=document.createElement("div");i.classList.add("pal-slot"),i.dataset.slot=String(n),i.innerHTML='<span class="pal-icon empty"></span>',e.appendChild(i)}}function Le(){let t=new URLSearchParams(window.location.search).get(E);ye(),t&&(t.split(",").map(i=>i.split(":")).forEach(([i,s])=>{let a=document.querySelector(`.pal-slot[data-slot="${i}"]`),c=w.find(o=>o.id===parseInt(s,10));if(a&&c){a.dataset.palId=String(c.id),a.innerHTML="";let o=document.createElement("img");o.src=c.icon,o.alt=c.name,o.classList.add("pal-icon","selected"),o.dataset.palId=String(c.id),l(o,"click",()=>{let d=parseInt(a.dataset.slot||"1",10);R(d)}),a.appendChild(o)}}),y())}function P(){let e=document.getElementById("selected-pals"),t=e.querySelectorAll(".pal-slot").length,n=v();if(t>n){for(let i=n;i<t;i++){let s=e.querySelector(`[data-slot="${i}"]`);s&&s.remove()}h(),y()}else if(t<n)for(let i=t;i<n;i++){let s=document.createElement("div");s.classList.add("pal-slot"),s.dataset.slot=String(i),s.innerHTML='<span class="pal-icon empty"></span>',e.appendChild(s)}}function K(){Le(),h();let e=document.getElementById("reset-pals-btn");l(e,"click",()=>{r(E,"\u4EF2\u9593")})}var H=[{id:1,name:"\u6B66\u8056",palLimit:5},{id:2,name:"\u6226\u795E",palLimit:5},{id:3,name:"\u8056\u72E9",palLimit:5},{id:4,name:"\u7FBD\u7687",palLimit:5},{id:5,name:"\u5148\u77E5",palLimit:5},{id:6,name:"\u9B54\u738B",palLimit:5},{id:7,name:"\u7363\u738B",palLimit:6},{id:8,name:"\u970A\u5C0A",palLimit:6}],Q="job",je=document.querySelectorAll('input[name="job"]');je.forEach(e=>{l(e,"change",t=>{let n=t.target,i=parseInt(n.value,10);document.getElementById("jobs-option-container").dataset.selectedJob=String(i),Te(i),P()})});function Te(e){let t=new URLSearchParams(window.location.search);t.set(Q,String(e));let n=t.toString()?"?"+t.toString():window.location.pathname;history.replaceState(null,"",n)}function ke(){let e=new URLSearchParams(window.location.search),t=parseInt(e.get(Q)||"1",10);H.find(i=>i.id===t)&&(document.getElementById("jobs-option-container").dataset.selectedJob=String(t),be(t))}function be(e){let t=document.querySelector(`input[name="job"][value="${e}"]`);t&&(t.checked=!0)}function X(){ke(),P()}function v(){let e=parseInt(document.getElementById("jobs-option-container").dataset.selectedJob||"1");return H.find(t=>t.id===e)?.palLimit||H[0].palLimit}var u=[{id:1,name:"\u56DE\u5FA9",count:0},{id:2,name:"\u56DE\u907F",count:0},{id:3,name:"\u30C0\u30A6\u30F3",count:0},{id:4,name:"\u9023\u6483",count:0},{id:5,name:"\u53CD\u6483",count:0},{id:6,name:"\u4F1A\u5FC3",count:0},{id:7,name:"\u4EF2\u9593\u9023\u6483",count:0},{id:8,name:"\u4EF2\u9593\u4F1A\u5FC3",count:0},{id:9,name:"\u6280\u80FD\u4F1A\u5FC3",count:0}],L=20,p=0,j="equipments";function z(){let e=document.getElementById("equipments-option-list");if(!e)throw new Error("equipmentList could not be found.");return e}function G(){let e=z();e.innerHTML="";let t=document.getElementById("equipments-total-count");u.forEach((n,i)=>{let s=document.createElement("div");s.classList.add("equipments-option-item"),s.innerHTML=`
      <span class="equipments-option-name">${n.name}</span>
      <div class="equipments-counter">
        <button data-index="${i}" data-action="decrease10">-10</button>
        <button data-index="${i}" data-action="decrease">-</button>
        <span>${n.count}</span>
        <button data-index="${i}" data-action="increase">+</button>
        <button data-index="${i}" data-action="increase10">+10</button>
      </div>
    `,e.appendChild(s)}),t.textContent=`${p}`,Ie()}function Ie(){let e=new URLSearchParams(window.location.search),t=u.filter(i=>i.count>0).map(i=>`${i.id}:${i.count}`).join(",");t?e.set(j,t):e.delete(j);let n=e.toString()?"?"+e.toString():window.location.pathname;history.replaceState(null,"",n)}function Me(){let t=new URLSearchParams(window.location.search).get(j)?.split(",")||[];u.forEach(n=>{n.count=0}),p=0,t.forEach(n=>{let[i,s]=n.split(":"),a=parseInt(i),c=parseInt(s),o=u.find(d=>d.id===a);if(o&&!isNaN(c)){let d=L-p,F=Math.min(c,10,d);o.count=F,p+=F}})}function V(){Me(),G();let e=z();e.dataset.listener||(l(e,"click",n=>{let i=n.target,s=i.dataset.action,a=Number(i.dataset.index);if(s&&a!==void 0){let c=u[a];if(s==="increase"&&p<L&&u[a].count<10)c.count++,p++;else if(s==="decrease"&&u[a].count>0)c.count--,p--;else if(s==="increase10"&&p<L){let o=L-p,d=Math.min(10,o,10-c.count);c.count+=d,p+=d}else if(s==="decrease10"&&c.count>0){let o=Math.min(10,c.count);c.count-=o,p-=o}G()}}),e.dataset.listener="true");let t=document.getElementById("reset-equipments-btn");l(t,"click",()=>{r(j,"\u88C5\u5099")})}var we=5,T="skills";function C(){let e=document.getElementById("skills-list");e.innerHTML="",M.forEach(t=>{let n=document.createElement("img");n.src=t.icon,n.alt=t.name,n.classList.add("skill-icon"),n.dataset.id=String(t.id),l(n,"click",()=>Re(t)),e.appendChild(n)}),Pe()}function Re(e){let t=document.querySelector(`.skill-slot[data-skill-id="${e.id}"]`);if(t){let n=parseInt(t.dataset.slot||"0",10);U(n)}else{let n=document.querySelector(".skill-slot:not([data-skill-id])");if(n){n.dataset.skillId=String(e.id),n.innerHTML="";let i=document.createElement("img");i.src=e.icon,i.alt=e.name,i.classList.add("skill-icon","selected"),i.dataset.palId=String(e.id),l(i,"click",()=>{let s=parseInt(n.dataset.slot||"0",10);U(s)}),n.appendChild(i),q(),C()}}}function U(e){let t=document.querySelector(`.skill-slot[data-slot="${e}"]`);t&&(t.removeAttribute("data-skill-id"),t.innerHTML='<span class="skill-icon empty"></span>'),C(),q()}function Pe(){document.querySelectorAll(".skill-icon").forEach(e=>{let t=e.dataset.id;document.querySelector(`.skill-slot[data-skill-id="${t}"]`)?e.classList.add("selected"):e.classList.remove("selected")})}function q(){let e=new URLSearchParams(window.location.search),t=Array.from(document.querySelectorAll(".skill-slot[data-skill-id]")).map(i=>{let s=i.getAttribute("data-slot"),a=i.getAttribute("data-skill-id");return`${s}:${a}`}).join(",");t?e.set(T,t):e.delete(T);let n=e.toString()?"?"+e.toString():window.location.pathname;history.replaceState(null,"",n)}function ve(){let e=document.getElementById("selected-skills");e.innerHTML="";for(let t=0;t<we;t++){let n=document.createElement("div");n.classList.add("skill-slot"),n.dataset.slot=String(t),n.innerHTML='<span class="skill-icon empty"></span>',e.appendChild(n)}}function He(){let t=new URLSearchParams(window.location.search).get(T);ve(),t&&(t.split(",").map(i=>i.split(":")).forEach(([i,s])=>{let a=document.querySelector(`.skill-slot[data-slot="${i}"]`),c=M.find(o=>o.id===parseInt(s,10));if(c&&a){a.dataset.skillId=String(c.id),a.innerHTML="";let o=document.createElement("img");o.src=c.icon,o.classList.add("skill-icon","selected"),o.alt=c.name,l(o,"click",()=>{let d=parseInt(a.dataset.slot||"1",10);U(d)}),a.appendChild(o)}}),q())}function W(){He(),C();let e=document.getElementById("reset-skills-btn");l(e,"click",()=>{r(T,"\u6280\u80FD")})}var B=(o=>(o.Mask="\u4EEE\u9762",o.Fossil="\u5316\u77F3",o.EarthTreasure="\u5730\u5B9D",o.Book="\u66F8\u7269",o.Statue="\u5F6B\u50CF",o.Necklace="\u9996\u98FE",o.Spore="\u80DE\u5B50",o))(B||{}),ee=[{id:1,name:"\u7D46\u306E\u4EEE\u9762",type:"\u4EEE\u9762",icon:"icons/relics/1.jpg"},{id:2,name:"\u77E2\u738B\u306E\u4EEE\u9762",type:"\u4EEE\u9762",icon:"icons/relics/2.jpg"},{id:3,name:"\u91D1\u525B\u306E\u4EEE\u9762",type:"\u4EEE\u9762",icon:"icons/relics/3.jpg"},{id:4,name:"\u796D\u7940\u306E\u9762\u5177",type:"\u4EEE\u9762",icon:"icons/relics/4.jpg"},{id:5,name:"\u9B54\u738B\u306E\u4EEE\u9762",type:"\u4EEE\u9762",icon:"icons/relics/5.jpg"},{id:6,name:"\u5F15\u96F7\u51E7",type:"\u5316\u77F3",icon:"icons/relics/6.jpg"},{id:7,name:"\u91D1\u7B94\u5375\u6BBB",type:"\u5316\u77F3",icon:"icons/relics/7.jpg"},{id:8,name:"\u65CB\u98A8\u7FBD\u6BDB",type:"\u5316\u77F3",icon:"icons/relics/8.jpg"},{id:9,name:"\u7425\u73C0\u30C7\u30F3\u866B",type:"\u5316\u77F3",icon:"icons/relics/9.jpg"},{id:10,name:"\u7ADC\u7D0B\u9AA8\u74B0",type:"\u5316\u77F3",icon:"icons/relics/10.jpg"},{id:11,name:"\u77E2\u7AF9",type:"\u5730\u5B9D",icon:"icons/relics/11.jpg"},{id:12,name:"\u9752\u3044\u96EA\u82B1",type:"\u5730\u5B9D",icon:"icons/relics/12.jpg"},{id:13,name:"\u6075\u307F\u306E\u96E8",type:"\u5730\u5B9D",icon:"icons/relics/13.jpg"},{id:14,name:"\u9B54\u6CD5\u306E\u7BB1",type:"\u5730\u5B9D",icon:"icons/relics/14.jpg"},{id:15,name:"\u7570\u5F62\u6C34\u6676",type:"\u5730\u5B9D",icon:"icons/relics/15.jpg"},{id:16,name:"\u706B\u7114\u306E\u66F8",type:"\u66F8\u7269",icon:"icons/relics/16.jpg"},{id:17,name:"\u7363\u76AE\u306E\u66F8",type:"\u66F8\u7269",icon:"icons/relics/17.jpg"},{id:18,name:"\u514D\u75AB\u306E\u66F8",type:"\u66F8\u7269",icon:"icons/relics/18.jpg"},{id:19,name:"\u7652\u3057\u306E\u66F8",type:"\u66F8\u7269",icon:"icons/relics/19.jpg"},{id:20,name:"\u77F3\u8108\u306E\u66F8",type:"\u66F8\u7269",icon:"icons/relics/20.jpg"},{id:21,name:"\u30A8\u30CD\u5F6B\u50CF",type:"\u5F6B\u50CF",icon:"icons/relics/21.jpg"},{id:22,name:"\u6ABB\u5F6B\u50CF",type:"\u5F6B\u50CF",icon:"icons/relics/22.jpg"},{id:23,name:"\u5E7B\u6676\u5F6B\u50CF",type:"\u5F6B\u50CF",icon:"icons/relics/23.jpg"},{id:24,name:"\u6642\u306E\u5F6B\u50CF",type:"\u5F6B\u50CF",icon:"icons/relics/24.jpg"},{id:25,name:"\u661F\u7F85\u5F6B\u50CF",type:"\u5F6B\u50CF",icon:"icons/relics/25.jpg"},{id:26,name:"\u9632\u5FA1\u9996\u98FE",type:"\u9996\u98FE",icon:"icons/relics/26.jpg"},{id:27,name:"\u8D64\u938C\u9996\u98FE",type:"\u9996\u98FE",icon:"icons/relics/27.jpg"},{id:28,name:"\u66B4\u98A8\u9996\u98FE",type:"\u9996\u98FE",icon:"icons/relics/28.jpg"},{id:29,name:"\u82F1\u970A\u9996\u98FE",type:"\u9996\u98FE",icon:"icons/relics/29.jpg"},{id:30,name:"\u96A0\u6DF5\u9996\u98FE",type:"\u9996\u98FE",icon:"icons/relics/30.jpg"},{id:31,name:"\u6642\u7A7A\u80DE\u5B50",type:"\u80DE\u5B50",icon:"icons/relics/31.jpg"},{id:32,name:"\u6D85\u69C3\u80DE\u5B50",type:"\u80DE\u5B50",icon:"icons/relics/32.jpg"},{id:33,name:"\u5F37\u529B\u80DE\u5B50",type:"\u80DE\u5B50",icon:"icons/relics/33.jpg"},{id:34,name:"\u8986\u7FBD\u80DE\u5B50",type:"\u80DE\u5B50",icon:"icons/relics/34.jpg"},{id:35,name:"\u68D8\u80DE\u5B50",type:"\u80DE\u5B50",icon:"icons/relics/35.jpg"}],k="relics";function te(){let e=document.getElementById("selected-relics");e.innerHTML="",Object.values(B).forEach((t,n)=>{let i=document.createElement("div");i.classList.add("relic-slot"),i.dataset.slot=String(n),i.dataset.type=t,i.innerHTML='<span class="relic-icon empty"></span>',e.appendChild(i)})}function b(){let e=document.getElementById("relics-list");e.innerHTML="",Object.values(B).forEach(t=>{let n=document.createElement("div");n.classList.add("relic-group"),n.innerHTML="",ee.filter(s=>s.type===t).forEach(s=>{let a=document.createElement("img");a.src=s.icon,a.alt=s.name,a.classList.add("relic-icon"),a.dataset.id=String(s.id),a.dataset.type=s.type,l(a,"click",()=>Ue(s)),n.appendChild(a)}),e.appendChild(n)}),Ce()}function Ue(e){let t=document.querySelector(`.relic-slot[data-type="${e.type}"]`);if(!t){console.warn(`Slot not found for relic type: ${e.type}`);return}let n=t.dataset.relicId?parseInt(t.dataset.relicId,10):null;n===e.id?Z(e.type):(n!=null&&Z(e.type),t.dataset.relicId=String(e.id),t.innerHTML=`<img src="${e.icon}" alt="${e.name}" class="relic-icon selected">`,x(),b()),x(),b()}function Z(e){let t=document.querySelector(`.relic-slot[data-type="${e}"]`);t&&(t.removeAttribute("data-relic-id"),t.innerHTML='<span class="relic-icon empty"></span>',x(),b())}function Ce(){document.querySelectorAll(".relic-icon").forEach(e=>{let t=e.dataset.id;document.querySelector(`.relic-slot[data-relic-id="${t}"]`)?e.classList.add("selected"):e.classList.remove("selected")})}function x(){let e=new URLSearchParams(window.location.search),t=Array.from(document.querySelectorAll(".relic-slot[data-relic-id]")).map(i=>i.getAttribute("data-relic-id")).join(",");t?e.set(k,t):e.delete(k);let n=e.toString()?"?"+e.toString():window.location.pathname;history.replaceState(null,"",n)}function qe(){let t=new URLSearchParams(window.location.search).get(k)?.split(",").map(n=>parseInt(n,10))||[];te(),t.forEach(n=>{let i=ee.find(a=>a.id===n),s=document.querySelector(`.relic-slot[data-type="${i?.type}"]:not([data-relic-id])`);i&&s&&(s.dataset.relicId=String(i.id),s.innerHTML=`<img src="${i.icon}" alt="${i.name}" class="relic-icon selected">`)})}function ne(){te(),qe(),b();let e=document.getElementById("reset-relics-btn");l(e,"click",()=>{r(k,"\u907A\u7269")})}var D=5,xe=[{id:1,name:"\u653B\u6483\u4E57\u7B97"},{id:2,name:"\u4F53\u529B\u4E57\u7B97"},{id:3,name:"\u9632\u5FA1\u4E57\u7B97"},{id:4,name:"\u6280\u80FD\u30C0\u30E1"},{id:5,name:"\u9023\u6483\u30C0\u30E1\u4E57\u7B97"},{id:6,name:"\u53CD\u6483\u30C0\u30E1\u4E57\u7B97"},{id:7,name:"\u4EF2\u9593\u30C0\u30E1"},{id:8,name:"\u5BFE\u30DC\u30B9\u30C0\u30E1"},{id:9,name:"\u4F1A\u5FC3\u30C0\u30E1\u52A0\u7B97"},{id:10,name:"\u4F1A\u5FC3\u62B5\u6297"}],I="statues",g=0,$=document.getElementById("statue-list"),ie=document.getElementById("statue-total-count");function Be(){$.innerHTML="",xe.forEach((e,t)=>{let n=document.createElement("div");n.classList.add("statue-option-item"),n.dataset.count=String(n.dataset.count||"0"),n.dataset.index=String(t),n.innerHTML=`
            <span class="statue-option-name">${e.name}</span>
            <div class="statue-counter">
                <button data-action="decrease">-</button>
                <span class="statue-option-count">${n.dataset.count}</span>
                <button data-action="increase">+</button>
            </div>
        `,$.appendChild(n)}),ie.textContent=`${g}`}l($,"click",e=>{let t=e.target,n=t.closest(".statue-option-item");if(n){let i=Number(n.dataset.index),s=parseInt(n.dataset.count||"0",10),a=t.dataset.action;a==="increase"&&g<D&&s<D?(s++,g++):a==="decrease"&&s>0&&(s--,g--),n.dataset.count=String(s);let c=n.querySelector(".statue-counter span");c.textContent=String(s),De()}});function De(){let e=new URLSearchParams(window.location.search),t=Array.from(document.querySelectorAll(".statue-option-item[data-count]")).filter(n=>parseInt(n.dataset.count||"0",10)>0).map(n=>`${n.dataset.index}:${n.dataset.count}`).join(",");t?e.set(I,t):e.delete(I),history.replaceState(null,"","?"+e.toString())}function $e(){let t=new URLSearchParams(window.location.search).get(I)?.split(",")||[];Be(),g=0,t.forEach(n=>{let[i,s]=n.split(":"),a=parseInt(i,10),c=parseInt(s,10),o=document.querySelector(`.statue-option-item[data-index="${a}"]`);if(o&&!isNaN(c)){let d=Math.min(c,D);o.dataset.count=String(d),o.querySelector("span.statue-option-count").textContent=String(d),g+=d}}),ie.textContent=`${g}`}function se(){$e();let e=document.getElementById("reset-statues-btn");l(e,"click",()=>{r(I,"\u5F6B\u50CF")})}var Ae=[{id:1,name:"\u9023\u6483\u30C0\u30E1\u30FC\u30B8\u4E57\u7B97"},{id:2,name:"\u53CD\u6483\u30C0\u30E1\u30FC\u30B8\u4E57\u7B97"},{id:3,name:"\u4F1A\u5FC3\u30C0\u30E1\u30FC\u30B8\u4E57\u7B97"},{id:4,name:"\u4F1A\u5FC3\u62B5\u6297\u4E57\u7B97"},{id:5,name:"\u901A\u5E38\u653B\u6483\u30C0\u30E1\u30FC\u30B8\u4E57\u7B97"},{id:6,name:"\u6280\u80FD\u30C0\u30E1\u30FC\u30B8\u4E57\u7B97"},{id:7,name:"\u4EF2\u9593\u30C0\u30E1\u30FC\u30B8\u4E57\u7B97\u4E57\u7B97"}],Ne=6,A="enchantment-sets";function Fe(){let e=document.getElementById("enchantment-sets-container");Ae.forEach(t=>{let n=document.createElement("div");n.classList.add("enchantment-set-item"),n.dataset.type=String(t.id),n.dataset.count="0";let i=document.createElement("span");i.textContent=t.name;let s=document.createElement("div");s.classList.add("checkbox-group");let a=document.createElement("input");a.type="checkbox",a.dataset.value="2",a.id=`set-${t.id}-x2`;let c=document.createElement("label");c.htmlFor=a.id,c.textContent="x2";let o=document.createElement("input");o.type="checkbox",o.dataset.value="4",o.id=`set-${t.id}-x4`;let d=document.createElement("label");d.htmlFor=o.id,d.textContent="x4",s.appendChild(a),s.appendChild(c),s.appendChild(o),s.appendChild(d),n.appendChild(i),n.appendChild(s),e.appendChild(n)})}function ae(e,t,n){let i=parseInt(e.dataset.count||"0",10),s=n?i+t:i-t,a=document.getElementById("enchantment-sets-container"),o=parseInt(a.dataset.total||"0",10)+(n?t:-t);if(o<=Ne)e.dataset.count=String(s),a.dataset.total=String(o),Ye();else{let d=e.querySelector(`input[data-value="${t}"]`);d.checked=!1}}function Oe(e){let t=e.target,n=t.closest(".enchantment-set-item"),i=parseInt(t.dataset.value,10),s=t.checked;ae(n,i,s)}function Ye(){let e=new URLSearchParams(window.location.search),t=Array.from(document.querySelectorAll(".enchantment-set-item input:checked")).map(i=>{let a=i.closest(".enchantment-set-item").dataset.type,c=i.dataset.value;return`${a}:${c}`}).join(",");t?e.set(A,t):e.delete(A);let n=e.toString()?"?"+e.toString():window.location.pathname;history.replaceState(null,"",n)}function _e(){let t=new URLSearchParams(window.location.search).get(A);if(Fe(),t){let n=t.split(",").map(s=>s.split(":")),i=document.getElementById("enchantment-sets-container");n.forEach(([s,a])=>{let c=i.querySelector(`.enchantment-set-item[data-type="${s}"]`),o=c.querySelector(`input[data-value="${a}"]`);o&&(o.checked=!0,ae(c,parseInt(a,10),!0))})}}function oe(){_e(),document.querySelectorAll('.enchantment-set-item input[type="checkbox"]').forEach(t=>{l(t,"change",Oe)})}function ce(){oe()}var le=[{id:1,name:"\u2163",options:[{id:1,name:"\u53CD\u6483\u30C0\u30E1"},{id:2,name:"\u9023\u6483\u30C0\u30E1"},{id:3,name:"\u4EF2\u9593\u30C0\u30E1"},{id:4,name:"\u6280\u80FD\u30C0\u30E1"},{id:5,name:"\u901A\u5E38\u30C0\u30E1"}]},{id:2,name:"\u2164",options:[{id:11,name:"\u9023\u6483\u30C0\u30E1\u30FC\u30B8\u8EFD\u6E1B"},{id:12,name:"\u4EF2\u9593\u30C0\u30E1\u30FC\u30B8\u8EFD\u6E1B"},{id:13,name:"\u6280\u80FD\u30C0\u30E1\u30FC\u30B8\u8EFD\u6E1B"},{id:14,name:"\u901A\u5E38\u653B\u6483\u30C0\u30E1\u30FC\u30B8\u8EFD\u6E1B"}]},{id:3,name:"\u2165",options:[{id:21,name:"\u4F1A\u5FC3\u30C0\u30E1\u52A0\u7B97"},{id:22,name:"\u4F1A\u5FC3\u62B5\u6297\u52A0\u7B97"},{id:23,name:"\u30DC\u30B9\u30C0\u30E1\u30FC\u30B8"},{id:24,name:"\u30DC\u30B9\u30C0\u30E1\u30FC\u30B8\u8EFD\u6E1B"}]}],N="enchantment-main";function Je(){let e=document.getElementById("enchantment-main-container");le.forEach(t=>{let n=document.createElement("div");n.classList.add("enchantment-part");let i=document.createElement("h4");i.classList.add("inline-title"),i.textContent=`${t.name}:`;let s=document.createElement("select");s.dataset.part=t.id;let a=document.createElement("option");a.value="",a.textContent="\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044",a.disabled=!0,a.selected=!0,s.appendChild(a),t.options.forEach(c=>{let o=document.createElement("option");o.value=c.name,o.textContent=c.name,o.dataset.id=String(c.id),s.appendChild(o)}),n.appendChild(i),n.appendChild(s),e.appendChild(n),l(s,"change",Ke)})}function Ke(e){let t=e.target,n=t.dataset.part,s=t.selectedOptions[0].dataset.id,a=new URLSearchParams(window.location.search);s?a.set(`${N}-${n}`,s):a.delete(`${N}-${n}`);let c=a.toString()?"?"+a.toString():window.location.pathname;history.replaceState(null,"",c)}function Qe(){let e=new URLSearchParams(window.location.search);le.forEach(t=>{let n=e.get(`${N}-${t.id}`),i=document.querySelector(`select[data-part="${t.id}"]`);if(n){let s=i.querySelector(`option[data-id="${n}"]`);s&&(i.value=s.value)}else i.selectedIndex=0})}function de(){Je(),Qe()}function f(){_(),X(),V(),W(),K(),ne(),se(),ce(),de()}function pe(){document.querySelectorAll(".tab").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-target");if(t){let n=document.querySelector(t);if(n){let i=n.offsetTop-50;window.scrollTo({top:i,behavior:"smooth"})}}})})}function re(){window.addEventListener("scroll",()=>{let e=window.scrollY+60;document.querySelectorAll("section").forEach(t=>{let n=t.getAttribute("id");if(n){let i=t.offsetTop,s=t.offsetHeight;if(e>=i&&e<i+s){document.querySelectorAll(".tab").forEach(c=>{c.classList.remove("active")});let a=document.querySelector(`[data-target="#${n}"]`);a&&a.classList.add("active")}}})})}window.addEventListener("load",()=>{f(),pe(),re()});})();
//# sourceMappingURL=index.js.map
